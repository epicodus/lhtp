<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-c_and_net/many-to-many-relationships/code_first_development_and_migrations" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Code First Development and Migrations | LHTP</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://new.learnhowtoprogram.com/c_and_net/many-to-many-relationships/code_first_development_and_migrations"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Code First Development and Migrations | LHTP"><meta data-rh="true" name="description" content="So far, we&#x27;ve manually created and updated our database using MySQL Workbench. However, this approach isn&#x27;t very effective for a large production application where many developers are collaborating together. Let&#x27;s say we have many different teams that are working on different features in an application and we&#x27;re working on a team that makes changes to the database. How can we convey the changes to other teams working on the application? We&#x27;d need to give everyone exact instructions on the changes we made, which could get tedious fast, especially if we&#x27;re making a lot of changes."><meta data-rh="true" property="og:description" content="So far, we&#x27;ve manually created and updated our database using MySQL Workbench. However, this approach isn&#x27;t very effective for a large production application where many developers are collaborating together. Let&#x27;s say we have many different teams that are working on different features in an application and we&#x27;re working on a team that makes changes to the database. How can we convey the changes to other teams working on the application? We&#x27;d need to give everyone exact instructions on the changes we made, which could get tedious fast, especially if we&#x27;re making a lot of changes."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://new.learnhowtoprogram.com/c_and_net/many-to-many-relationships/code_first_development_and_migrations"><link data-rh="true" rel="alternate" href="https://new.learnhowtoprogram.com/c_and_net/many-to-many-relationships/code_first_development_and_migrations" hreflang="en"><link data-rh="true" rel="alternate" href="https://new.learnhowtoprogram.com/c_and_net/many-to-many-relationships/code_first_development_and_migrations" hreflang="x-default"><script src="/usersnap-loader.js" defer="defer"></script><link rel="stylesheet" href="/assets/css/styles.c01e3e32.css">
<link rel="preload" href="/assets/js/runtime~main.fe8b33c8.js" as="script">
<link rel="preload" href="/assets/js/main.8dbf75ae.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(e){}return e}()||function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/lhtp-favicon.png" alt="Learn How to Program" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/lhtp-favicon.png" alt="Learn How to Program" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Learn How to Program</b></a><a class="navbar__item navbar__link" href="/courses">Courses</a><a class="navbar__item navbar__link" href="/student-handbook">Handbook</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/c_and_net">C# and .NET</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/c_and_net/getting-started-with-c/welcome_to_c">Getting Started with C#</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/c_and_net/data-types-variables-branching-and-looping/using_a_c_repl">Data Types, Variables, Branching, and Looping</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/c_and_net/basic-console-apps/expectations_and_game_plan_for_building_a_c_console_app">Basic Console Apps</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/c_and_net/tdd-and-debugging/what_we&#x27;ll_learn_in_this_section">TDD and Debugging</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/c_and_net/test-driven-development-with-c/test_driven_development_with_c_objectives">Test-Driven Development With C#</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/c_and_net/basic-web-applications/basic_web_applications_objectives">Basic Web Applications</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/c_and_net/database-basics/database_basics_objectives">Database Basics</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/c_and_net/many-to-many-relationships/many_to_many_objectives">Many-To-Many Relationships</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/c_and_net/many-to-many-relationships/many_to_many_objectives">WEEKEND</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/c_and_net/many-to-many-relationships/many_to_many_objectives">Many-To-Many Objectives</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/c_and_net/many-to-many-relationships/many_to_many_relationship_review">Many-to-Many Relationship Review</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/c_and_net/many-to-many-relationships/code_first_development_and_migrations">Code First Development and Migrations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/c_and_net/many-to-many-relationships/many_to_many_relationships_join_entities">Many-to-Many Relationships: Join Entities</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/c_and_net/many-to-many-relationships/many_to_many_read_functionality">Many-to-Many Read Functionality</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/c_and_net/many-to-many-relationships/many_to_many_create_functionality">Many-to-Many Create Functionality</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/c_and_net/many-to-many-relationships/many_to_many_update_functionality">Many-to-Many Update Functionality</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/c_and_net/many-to-many-relationships/many_to_many_delete_functionality">Many-to-Many Delete Functionality</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/c_and_net/many-to-many-relationships/journal_11">Journal #11</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/c_and_net/many-to-many-relationships/university_registrar_doctor&#x27;s_office_two_day_project___part_1">MONDAY</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/c_and_net/many-to-many-relationships/university_registrar_doctor&#x27;s_office_two_day_project___part_2_day_2">TUESDAY</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/c_and_net/many-to-many-relationships/refactoring_with_many_to_many_two_day_project___part_1">WEDNESDAY</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/c_and_net/many-to-many-relationships/refactoring_with_many_to_many_two_day_project___part_2_day_2">THURSDAY</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/c_and_net/many-to-many-relationships/many_to_many_independent_project">FRIDAY</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/c_and_net/authentication-with-identity/authentication_with_identity_objectives">Authentication with Identity</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/c_and_net/building-an-api/building_an_api_objectives">Building an API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/c_and_net/team-week/team_week_objectives">Team Week</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_xK9p"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Many-To-Many Relationships</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">WEEKEND</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><a href="https://github.com/epicodus-curriculum/c-sharp-full-stack/blob/main/0ba_code_first_development_and_migrations.md" target="_blank" rel="noopener noreferrer" class="breadcrumbs__link" itemprop="item"><span itemprop="name">Code First Development and Migrations</span></a><meta itemprop="position" content="3"></li></ul></nav><div class="theme-doc-markdown markdown"><header><h1>Code First Development and Migrations</h1></header><p>So far, we&#x27;ve manually created and updated our database using MySQL Workbench. However, this approach isn&#x27;t very effective for a large production application where many developers are collaborating together. Let&#x27;s say we have many different teams that are working on different features in an application and we&#x27;re working on a team that makes changes to the database. How can we convey the changes to other teams working on the application? We&#x27;d need to give everyone exact instructions on the changes we made, which could get tedious fast, especially if we&#x27;re making a lot of changes.</p><p>It&#x27;s very common for a database to change over time. In fact, in large projects, there may be hundreds or even thousands of changes to a database over the course of a project. It would be very tedious to make all those changes in MySQL Workbench or another database tool.</p><p>Fortunately, EF Core provides a solution for this. We can use <a href="https://learn.microsoft.com/en-us/ef/core/managing-schemas/migrations/?tabs=dotnet-core-cli" target="_blank" rel="noopener noreferrer"><strong>migrations</strong></a> to create a new database or update an existing database based on our code. Migrations are a common feature of many frameworks, including Rails, which uses Active Record. So in this lesson, we&#x27;re going to learn about database migrations, how to create them, and install the tools necessary for the job. The instructions in this lesson can be applied to any other project you create.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="to-do-list-refactor-plan">To Do List Refactor Plan<a href="#to-do-list-refactor-plan" class="hash-link" aria-label="Direct link to To Do List Refactor Plan" title="Direct link to To Do List Refactor Plan">​</a></h2><hr><p>In this lesson, we&#x27;ll begin to refactor our To Do List app to use EF Core migrations. We&#x27;ll build off of the To Do List app that we completed by the end of the last course section. You are welcome to continue building off your own project on a new branch or save your changes to a new repo. Or, you are welcome to use the main branch of the following repo as a <strong>starter project</strong>:</p><hr><p><strong><a href="https://github.com/epicodus-lessons/section-4-to-do-list-with-many-to-many-csharp-net6/tree/1_starter_project" target="_blank" rel="noopener noreferrer"><i class="glyphicon glyphicon-folder-open"></i>  Starter GitHub Repo for To Do List with EF Core Migrations and a Many-to-Many Relationship</a></strong></p><p>Before proceeding, make sure to update the name of your database in <code>appsettings.json</code> to reflect the new project we are building. In the lessons, we&#x27;ll use the name <code>to_do_list_with_many_to_many</code>, but you can pick whatever you prefer:</p><div class="filename">ToDoList/appsettings.json</div><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;ConnectionStrings&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;DefaultConnection&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Server=localhost;Port=3306;database=to_do_list_with_many_to_many;uid=root;pwd=epicodus;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="database-migrations">Database Migrations<a href="#database-migrations" class="hash-link" aria-label="Direct link to Database Migrations" title="Direct link to Database Migrations">​</a></h2><hr><p>A <strong>migration</strong> is simply a file that describes an update to the database. When we use EF Core to develop and manage our database from our project&#x27;s codebase, we define how our database should be structured using our project&#x27;s models and the <code>DbContext</code> class. Part of this involves telling EF Core to create a migration. When a migration is created, EF Core reviews our project&#x27;s models and creates a file that describes how our database should be structured based on our models. Each migration is a snapshot of how our database should be structured, and every time we make changes to our entities (our project&#x27;s models like <code>Item</code> and <code>Category</code>), we need to make a new migration so that EF Core knows how to update our database.</p><p>A large project could have thousands of migrations. In order to recreate the database schema, a developer simply needs to run a command and all the migrations will run sequentially, updating the database to its current state. This can make our programs more flexible and significantly speed up the time it takes to make changes to our database.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="installing-tools">Installing Tools<a href="#installing-tools" class="hash-link" aria-label="Direct link to Installing Tools" title="Direct link to Installing Tools">​</a></h3><p>For Entity Framework Core, we use a tool called <code>dotnet-ef</code> to create migrations and update our database. We&#x27;ll install this tool globally so that it is always available in all of our projects. Run the following command in your terminal now:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ dotnet tool </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> --global dotnet-ef --version </span><span class="token number" style="color:#36acaa">6.0</span><span class="token plain">.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Optionally, you can read more about the <code>dotnet ef</code> tool <a href="https://docs.microsoft.com/en-us/ef/core/cli/dotnet" target="_blank" rel="noopener noreferrer">on the docs</a>.</p><p>In order to use <code>dotnet-ef</code>, we also need to install the <code>Microsoft.EntityFrameworkCore.Design</code> package in our ASP.NET Core projects. Within the production directory of our To Do List app, run the following command: </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ dotnet </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> package Microsoft.EntityFrameworkCore.Design -v </span><span class="token number" style="color:#36acaa">6.0</span><span class="token plain">.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>Microsoft.EntityFrameworkCore.Design</code> package adds tooling to our project so that EF Core can find our  DbContext (for example, <code>ToDoListContext.cs</code>) during <strong>design time</strong>. According to the <a href="https://learn.microsoft.com/en-us/ef/core/cli/dbcontext-creation?tabs=dotnet-core-cli" target="_blank" rel="noopener noreferrer">official documentation</a>:</p><blockquote><p>Some of the EF Core Tools commands (for example, the Migrations commands) require a derived DbContext instance to be created at design time in order to gather details about the application&#x27;s entity types and how they map to a database schema.</p></blockquote><p>We&#x27;re familiar with the term <strong>run time</strong>, when we run our application with <code>dotnet watch run</code>; but what exactly is <strong>design time</strong>? It&#x27;s the time when we are actually writing and designing our code. As noted in the quote above, we need to add tools for EF Core to access our DbContext at design time so that our migrations (the model of our database) can be created and applied (when we update the database with <code>dotnet ef database update</code>).</p><p>Note that installing the <code>Microsoft.EntityFrameworkCore.Design</code> package is all we need to do in order to give EF Core access to our DbContext at design time. However, we can create a <code>DesignTimeDbContextFactory</code> class in our application with which we can configure additional design time services to run. We won&#x27;t be doing this in our applications. To optionally learn more, visit the following Microsoft (MS) documentation:</p><ul><li><a href="https://learn.microsoft.com/en-us/ef/core/cli/dbcontext-creation?tabs=dotnet-core-cli" target="_blank" rel="noopener noreferrer">Design-time DbContext Creation</a></li><li><a href="https://learn.microsoft.com/en-us/ef/core/cli/services" target="_blank" rel="noopener noreferrer">Design-time Services</a></li></ul><p>Next, let&#x27;s look at how to create a database migration. We&#x27;re not going to do this now, but instead in the next lesson, once all of the necessary setup is in place in our To Do List application. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-migration">Creating a Migration<a href="#creating-a-migration" class="hash-link" aria-label="Direct link to Creating a Migration" title="Direct link to Creating a Migration">​</a></h3><p>Next, let&#x27;s learn the command we need to run in order to create a migration. The following command should be run in the project&#x27;s production directory. For our To Do List app, this is the <code>ToDoList</code> project directory. Go ahead and run this command now:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ dotnet ef migrations </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> Initial</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When we run the above command, a new migration will be created with the name <code>Initial</code> in a new folder called <code>Migrations</code>. If this is the first migration in a project, EF Core will automatically generate a <code>Migrations</code> folder in the root directory. Note that we can name our migration anything we want, but it&#x27;s common for the first migration to contain the word <code>Initial</code> or something like it. Also note that migration names should be in upper camel case. </p><p>When naming subsequent migrations, start with a verb to describe the change that the migration will make to the database. The migration name can be used like a commit message in a version control system, like <code>AddItemsPriority</code> if we wanted to add a priority property to our items table. So, the entire command would look like this: </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ dotnet ef migrations </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> AddItemsPriority</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When we create our migration, EF Core will automatically generate code for how the database should look based on the code that is in our models. Using migrations is often called using <strong>code first migrations</strong> because we will use our entity framework models in our project&#x27;s code as the source of truth for our database. </p><p>The alternative to migrations is using the database as the source of truth and scaffolding our code based on the database; this is called <a href="https://learn.microsoft.com/en-us/ef/core/managing-schemas/scaffolding/?tabs=dotnet-core-cli" target="_blank" rel="noopener noreferrer"><strong>reverse engineering</strong></a> and we won&#x27;t be using this method in the course.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-migrations-directory">The <code>Migrations</code> Directory<a href="#the-migrations-directory" class="hash-link" aria-label="Direct link to the-migrations-directory" title="Direct link to the-migrations-directory">​</a></h3><p>For each migration, EF Core will create three files in the <code>Migrations</code> directory:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[Timestamp]_Initial.cs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Timestamp]_Initial.Designer.cs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MyContextModelSnapshot.cs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note that <code>[Timestamp]</code> will vary based on when the migration was created and <code>Initial</code> will be different based on the name of the migration.</p><p>The second file is metadata that EF Core needs while the third file is a snapshot of the database for Entity. We won&#x27;t touch these two files. </p><p>The first file, though, can be edited. Here&#x27;s an example of the <code>[Timestamp]_Initial.cs</code> migration file that we can edit (<em>this is an example only</em>):</p><div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">Microsoft</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">EntityFrameworkCore</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Migrations</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">namespace</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">ToDoList</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Migrations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">partial</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Initial</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">Migration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">protected</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">override</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Up</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">MigrationBuilder</span><span class="token plain"> migrationBuilder</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token range operator" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">protected</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">override</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Down</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">MigrationBuilder</span><span class="token plain"> migrationBuilder</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token range operator" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The migration contains two methods: <code>Up</code> and <code>Down</code>. In an ideal world, EF Core will create a perfect scaffold of the migration for us based on our models. However, this isn&#x27;t always the case. We can add further modifications to the <code>Up</code> method. The <code>Down</code> method provides instructions for reversing the migration if we decide to revert to the previous migration.</p><p>We will generally rely on EF Core to take care of migration scaffolding for us, but it&#x27;s important to be aware that these migrations can be fine-tuned further by modifying the migration file.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="updating-the-database-with-the-migration">Updating the Database with the Migration<a href="#updating-the-database-with-the-migration" class="hash-link" aria-label="Direct link to Updating the Database with the Migration" title="Direct link to Updating the Database with the Migration">​</a></h3><p>Once we have verified that the migration looks correct and made any necessary changes, we&#x27;ll run the following command to update our database</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ dotnet ef database update</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Just like with <code>dotnet ef migrations add [MigrationName]</code>, we need to run the above command in the production directory of our project. Do so now in the <code>ToDoList</code> production directory. </p><p>Running <code>dotnet ef database update</code> will automatically update our database to reflect the changes listed in our migrations. There is no longer any need for us to directly modify the database in MySQL Workbench! Go ahead and check MySQL Workbench now and look for the newly created <code>to_do_list_with_many_to_many</code> database.</p><p>Remember that migrations provide a record of how our database changes. If we make unwanted changes to our database, we should always use a <strong>new</strong> migration (or several migrations) to reverse the changes. This helps ensure that our data is safe and that the log of our migrations match the code in our migration files. It also makes it easy to make changes to a database in a large project where many developers are collaborating. We can push our migrations to GitHub and then another developer can pull our updates and run the migrations with a single command.</p><p>There is one exception to the rule above: let&#x27;s say that we made a mistake with our most recent migration and we haven&#x27;t pushed the changes to GitHub. In this case, we can use the following command to revert the migration:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ dotnet ef migrations remove</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note that if you&#x27;ve already updated your database with the migration that you want to remove, you&#x27;ll need to run <code>dotnet ef database update</code> after you remove the last migration with <code>dotnet ef migrations remove</code>.</p><p>For more information on migrations in EF Core, see <a href="https://docs.microsoft.com/en-us/ef/core/managing-schemas/migrations/" target="_blank" rel="noopener noreferrer">the official documentation</a>.</p><p>Up next, we&#x27;ll learn how to create a many-to-many association.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/c_and_net/many-to-many-relationships/many_to_many_relationship_review"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Many-to-Many Relationship Review</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/c_and_net/many-to-many-relationships/many_to_many_relationships_join_entities"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Many-to-Many Relationships: Join Entities</div></a></nav></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Epicodus, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.fe8b33c8.js"></script>
<script src="/assets/js/main.8dbf75ae.js"></script>
</body>
</html>