"use strict";(self.webpackChunklhtp=self.webpackChunklhtp||[]).push([[32125],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>d});var n=a(67294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var i=n.createContext({}),c=function(e){var t=n.useContext(i),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},p=function(e){var t=c(e.components);return n.createElement(i.Provider,{value:t},e.children)},h="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,s=e.originalType,i=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),h=c(a),m=o,d=h["".concat(i,".").concat(m)]||h[m]||u[m]||s;return a?n.createElement(d,r(r({ref:t},p),{},{components:a})):n.createElement(d,r({ref:t},p))}));function d(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var s=a.length,r=new Array(s);r[0]=m;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l[h]="string"==typeof e?e:o,r[1]=l;for(var c=2;c<s;c++)r[c]=a[c];return n.createElement.apply(null,r)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},68817:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>i,contentTitle:()=>r,default:()=>u,frontMatter:()=>s,metadata:()=>l,toc:()=>c});var n=a(87462),o=(a(67294),a(3905));const s={title:"7. React Context",id:"react_context",slug:"react_context",hide_table_of_contents:!0,sidebar_position:7,day:"weekend",type:"lesson",url:"https://github.com/epicodus-curriculum/react-full-stack/blob/main/10_react-with-apis/0g_react_context.md"},r=void 0,l={unversionedId:"react_part_time/react-with-apis/react_context",id:"react_part_time/react-with-apis/react_context",title:"7. React Context",description:"Now let's turn our attention to learning a new React tool for sharing data called context. In this lesson we'll get a conceptual introduction to context: what it is, its common use cases, and its alternatives.",source:"@site/docs/react_part_time/10_react-with-apis/0g_react_context.md",sourceDirName:"react_part_time/10_react-with-apis",slug:"/react_part_time/react-with-apis/react_context",permalink:"/lhtp/react_part_time/react-with-apis/react_context",draft:!1,tags:[],version:"current",sidebarPosition:7,frontMatter:{title:"7. React Context",id:"react_context",slug:"react_context",hide_table_of_contents:!0,sidebar_position:7,day:"weekend",type:"lesson",url:"https://github.com/epicodus-curriculum/react-full-stack/blob/main/10_react-with-apis/0g_react_context.md"},sidebar:"react_part_time",previous:{title:"6. NY Times API: Implementing useReducer",permalink:"/lhtp/react_part_time/react-with-apis/ny_times_api_implementing_usereducer"},next:{title:"8. Help Queue: Planning and Setup for Context",permalink:"/lhtp/react_part_time/react-with-apis/help_queue_planning_and_setup_for_context"}},i={},c=[{value:"Context Shares Data",id:"context-shares-data",level:2},{value:"Context Updates the Components that Consumes its Data",id:"context-updates-the-components-that-consumes-its-data",level:2},{value:"Context Is Not a State Management Tool",id:"context-is-not-a-state-management-tool",level:2},{value:"When to Use Context",id:"when-to-use-context",level:2},{value:"Use Context as a Last Resort",id:"use-context-as-a-last-resort",level:2},{value:"Summary",id:"summary",level:2}],p={toc:c},h="wrapper";function u(e){let{components:t,...a}=e;return(0,o.kt)(h,(0,n.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Now let's turn our attention to learning a new React tool for sharing data called ",(0,o.kt)("strong",{parentName:"p"},"context"),". In this lesson we'll get a conceptual introduction to context: what it is, its common use cases, and its alternatives. "),(0,o.kt)("p",null,"Then, in the next lesson, we'll revisit our Help Queue application and update it to use context. We'll put all of the concepts in this lesson into practice by adding a light theme and dark theme to the Help Queue, and a button to toggle between each."),(0,o.kt)("h2",{id:"context-shares-data"},"Context Shares Data"),(0,o.kt)("hr",null),(0,o.kt)("p",null,"Context is a mechanism that allows developers to ",(0,o.kt)("strong",{parentName:"p"},"share data")," in a React application. Context is an object, and we can set up as many context objects as we need. In short, context is an alternative to props, both of which allow developers to pass data down, from one component to the next. The big difference between the two is how the data is passed down: "),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"With props, data is explicitly passed down between each component to whatever component that needs it."),(0,o.kt)("li",{parentName:"ul"},'With context, we don\'t have to explicitly pass data between components. Instead, we create a new "context" and give it data to hold. Then, any component that needs the data stored in the context accesses it directly. ')),(0,o.kt)("p",null,"Check out the following visualization that demonstrates the difference."),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://learnhowtoprogram.s3.us-west-2.amazonaws.com/React/Week-5-React-2020/context-vs-props-data-flow.png",alt:"Data flow between React context and props."})),(0,o.kt)("p",null,"In both cases, data flows down, but the power of context comes in its ability to share data between two components without having to explicitly pass data between any intermediary components. Because of this, context helps developers avoid prop drilling when data is shared across many components. "),(0,o.kt)("h2",{id:"context-updates-the-components-that-consumes-its-data"},"Context Updates the Components that Consumes its Data"),(0,o.kt)("hr",null),(0,o.kt)("p",null,"The other notable difference between context and props is in its relation to re-rendering. You may remember these key details about props:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"A change in the value of a component's props does ",(0,o.kt)("strong",{parentName:"li"},"not")," trigger a re-render of that component. "),(0,o.kt)("li",{parentName:"ul"},"Only a change in the parent component's state will trigger a re-render of the parent component. This will in turn re-render all of its child components and they will all receive new props. ")),(0,o.kt)("p",null,"With context, the opposite is true:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},'A change in the value of the context causes all of the components that consume (meaning, "use") its data will automatically be re-rendered. When we implement context in our Help Queue app in the next lesson, we\'ll learn exactly how this works. ')),(0,o.kt)("h2",{id:"context-is-not-a-state-management-tool"},"Context Is Not a State Management Tool"),(0,o.kt)("hr",null),(0,o.kt)("p",null,'It may be tempting to jump to the conclusion that context is a tool for "state management", however it\'s not true. Context is a tool for transmitting data, just like props. Neither tools change the value of their data, they just store and transmit data.'),(0,o.kt)("p",null,"If we want the data that context holds to change over time, then we need to use context in conjunction with ",(0,o.kt)("inlineCode",{parentName:"p"},"useState()"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"useReducer()"),", or a class component's ",(0,o.kt)("inlineCode",{parentName:"p"},"state")," object. We'll learn how to do this in the next lesson."),(0,o.kt)("h2",{id:"when-to-use-context"},"When to Use Context"),(0,o.kt)("hr",null),(0,o.kt)("p",null,"Context should only be used in two cases:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"To share data that's considered global."),(0,o.kt)("li",{parentName:"ol"},"To share data that is used in multiple remote branches of a component tree that you would otherwise need to use heavy prop drilling to reach. ")),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://reactjs.org/docs/context.html"},"The React docs for context"),' provides a few examples of what data could be needed on a "global" scale:'),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"The user's locale, which includes the user's language, time zone, region, and any special preferences."),(0,o.kt)("li",{parentName:"ul"},"Color themes, like light and dark modes. "),(0,o.kt)("li",{parentName:"ul"},"The authenticated user.")),(0,o.kt)("p",null,"In theory, in each of the above cases many components will need the same information in order to function. To help us understand the two use cases for context, let's visualize them. Let's pretend we have an application with a component tree that looks like this:"),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://learnhowtoprogram.s3.us-west-2.amazonaws.com/React/Week-5-React-2020/context-application-state-1.png",alt:"An example component tree with `App.js` as the root component and many nested components."})),(0,o.kt)("p",null,"The root component of our tree is ",(0,o.kt)("inlineCode",{parentName:"p"},"App.js")," and each component in the tree is represented by a square. Let's first visualize what an application that uses globally shared data might look like. We'll update our app's component tree to fill in components that use the global data with the color yellow:"),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://learnhowtoprogram.s3.us-west-2.amazonaws.com/React/Week-5-React-2020/context-application-state-2-global.png",alt:"An example component tree that uses shared data that's considered global."})),(0,o.kt)("p",null,'As we can see, "global" data in a React app doesn\'t mean that every component uses that data, but that ',(0,o.kt)("em",{parentName:"p"},"most")," or ",(0,o.kt)("em",{parentName:"p"},"many")," components do. This is a great use case for React context."),(0,o.kt)("p",null,"The other use case for context is when multiple components that are very far apart in the component tree need access to the same data. Let's visualize what that looks like: "),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://learnhowtoprogram.s3.us-west-2.amazonaws.com/React/Week-5-React-2020/context-application-state-3-multiple-remote.png",alt:"An example component tree that uses shared data that is used by multiple components that are very far a part in the component tree."})),(0,o.kt)("p",null,"In the above example, the components that use the shared data are in a light purple color, and they are pretty far apart in the component tree. Using context in the above example will help us avoid lifting data (as in ",(0,o.kt)("a",{parentName:"p",href:"https://reactjs.org/docs/lifting-state-up.html"},'"lifting state up"'),") to the nearest ancestor component (",(0,o.kt)("inlineCode",{parentName:"p"},"App.js"),') and passing props down through many components (also called "prop drilling") to get the shared data where it needs to go.'),(0,o.kt)("h2",{id:"use-context-as-a-last-resort"},"Use Context as a Last Resort"),(0,o.kt)("hr",null),(0,o.kt)("p",null,"With the use cases for context in mind, there's one final important thing to note when using context: the React docs heavily encourage developers to use context to share data only as a last resort. Why? Because it makes components harder to reuse: when a component uses context, it becomes dependent on the context and it can't be used outside of the context. "),(0,o.kt)("p",null,"But what would we do instead of using context? These are the two alternatives:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Lift shared data up to a common ancestor and pass data down via props."),(0,o.kt)("li",{parentName:"ul"},"Consider how you can compose your components so that passing props is less cumbersome. ")),(0,o.kt)("p",null,"The React docs explain ",(0,o.kt)("a",{parentName:"p",href:"https://reactjs.org/docs/context.html#before-you-use-context"},"the alternatives to using context on the docs"),", with examples. We'll also revisit this topic when we implement context in the Help Queue application. "),(0,o.kt)("h2",{id:"summary"},"Summary"),(0,o.kt)("hr",null),(0,o.kt)("p",null,"In this lesson, we've covered the conceptual basics of context:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Similar to props, context is a mechanism to transfer data between components."),(0,o.kt)("li",{parentName:"ul"},"Context is an object, and we can create as many of them as we need in our app."),(0,o.kt)("li",{parentName:"ul"},"Context updates the components that consume its data when its own value changes."),(0,o.kt)("li",{parentName:"ul"},"If we want to change the value of a context we create, we'll need to use a state management tool like ",(0,o.kt)("inlineCode",{parentName:"li"},"useState"),", ",(0,o.kt)("inlineCode",{parentName:"li"},"useReducer"),", or a class component's ",(0,o.kt)("inlineCode",{parentName:"li"},"this.state")," object. "),(0,o.kt)("li",{parentName:"ul"},'Context should be used as a last resort to share data that\'s considered "global" in a React app.')),(0,o.kt)("p",null,"In the next lesson, we'll add a button to the Help Queue to toggle between light and dark mode, and we'll use context to do it! In the process, we'll review all of the concepts we learned in this lesson."))}u.isMDXComponent=!0}}]);